---@class Dashboard
---@field launched boolean
---@field is_setup boolean
---@field launch fun(): nil
---@field setup fun(table): nil
local self = {}

self.launched = false

function self.setup(config)
    require('nvimawscli.config').setup(config)

    vim.api.nvim_create_user_command('Aws', function (opts)
        require('nvimawscli').launch()
    end, {})

    self.is_setup = true
end

--- Launch the Dashboard
function self.launch()
    if self.launched then
        vim.api.nvim_err_writeln("Dashboard already launched")
        return
    end
    if not self.is_setup then
        vim.api.nvim_err_writeln("Dashboard not setup")
        return
    end
    self.launched = true
    -- require("nvimawscli.menu").load()
    
     local graph_renderer = require("nvimawscli.utils.graphs")

     local rows = graph_renderer.render({1.0, 1.1986693307950613, 1.3894183423086506, 1.5646424733950355, 1.7173560908995227, 1.8414709848078965, 1.9320390859672263, 1.9854497299884604, 1.999573603041505, 1.9738476308781951, 1.9092974268256817, 1.80849640381959, 1.6754631805511506, 1.5155013718214643, 1.3349881501559047, 1.1411200080598671, 0.9416258565724199, 0.7444588979731683, 0.5574795567051476, 0.38814210905728075, 0.2431975046920717, 0.1284242275864118, 0.04839792611048388, 0.00630899636653548, 0.0038353911641594296, 0.041075725336861546, 0.11654534427984686, 0.22723551244401285, 0.36873336212767904, 0.5353978205862434, 0.7205845018010741, 0.9169105971825036, 1.1165492048504937, 1.3115413635133786, 1.4941133511386089, 1.656986598718789, 1.7936678638491532, 1.898708095811627, 1.9679196720314867, 1.998543345374605, 1.989358246623382, 1.9407305566797726, 1.8545989080882803, 1.7343970978741134, 1.5849171928917616, 1.4121184852417565, 1.2228899141002458, 1.0247754254533579, 0.8256732187770186, 0.6335208707480715, 0.4559788891106302, 0.30012531240645635, 0.17217353091434628, 0.07722457838719265, 0.019063769933508445, 9.793449296524592e-06, 0.020822270848683044, 0.08067147433532429, 0.17717140503129214, 0.3064749152228776, 0.46342708199956506, 0.641770717763173, 0.8343958245516906, 1.0336230472211385, 1.231509825101539, 1.420167036826641, 1.5920735147072245, 1.7403758899524486, 1.8591618148564968, 1.9436956694441048, 1.9906073556948702, 1.9980266527163617, 1.9656577765492775, 1.8947911721405033, 1.7882520673753164, 1.6502878401571168, 1.4863986888537981, 1.3031183567457023, 1.1077536522994422, 0.9080931497723184, 0.7120966833349347, 0.5275780136015338, 0.3618933176520498, 0.22164792146570156, 0.11243296641849543, 0.03860250812044319, 0.003099933958403911, 0.007340619529367265, 0.051155502081876025, 0.13279782051441869, 0.24901275322832384, 0.3951671775937159, 0.5654343779281065, 0.7530263382633791, 0.9504643591216326, 1.1498772096629524, 1.3433149288198987, 1.5230657651576993, 1.6819636200681356, 1.8136737375071053}, 10, 1)
     for _, row in ipairs(rows) do
         print(row)
     end
end

return self
